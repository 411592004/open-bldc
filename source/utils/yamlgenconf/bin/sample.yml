---

GLOBAL: # module GLOBAL

  define: 
    #define GLOBAL_VERSION "0.3.1"
    version: "0.3.1"  

include: modules_inc.yml

NEUES_MODUL: # module GPROT

  include: submodule_inc.yml

  # -> DefinesConfigGeneratorStrategy 
  define: 
    num_adc: 10   #define GPROT_NUM_ADC 10
    max_foo: 100

  # -> FlagsConfigGeneratorStrategy
  flags: 
    pwm_comm: 
      bit: 0
      ro: yes
    comm_tim: 
      bit: 1
    adc_comm: 
      bit: 2
    all_lo: 
      bit: 3
    all_hi: 
      bit: 4

  # -> RegisterConfigGeneratorStrategy
  register_groups: 
    Flags: 
      description: Flag register
      registers: 
        #define GPROT_REGISTERS_FLAGS_REG_ADDR: 0
        flags_reg_addr: 
          register: 0
          ro: yes
          label: Flag register
  
    PWM: 
      description: PWM settings
      registers: 
        pwm_offset_reg_addr: 
          register: 1
          label: Offset register address
          widget: 
            class: SpinBox
            ctype: u16
            dtype: plain
            min: 0
            max: 666
        pwm_val_reg_addr: 
          register: 2
          label: PWM value register address
          widget: 
            class: SpinScrollBox
  
    ADC: 
      description: Register settings for the A/D converter
      registers: 
        adc_zero_value_reg_addr: 
          register: 4
          label: Zero value
        adc_global_current_reg_addr: 
          register: 8
          ro: yes
          label: Global current
        adc_phase_voltage_reg_addr: 
          register: 9
          ro: yes
          label: Phase voltage
  
    Commutation_Timer: 
      description: Register settings for the commutation timer
      registers: 
        comm_tim_spark_advance_reg_addr: 
          register: 5
          label: Spark advance
        comm_tim_direct_cutoff_reg_addr: 
          register: 6
          label: Cutoff
        comm_tim_iir_pole_reg_addr: 
          register: 7
          label: Pole
        comm_tim_freq_reg_addr: 
          register: 3
          label: Frequency
  
    Other: 
      descriptions: Custom other register settings
      registers: 
        new_cycle_time: 
          register: 10
          ro: no
          label: New cycle time
  
    CPU Load: 
      description: For resolving thresholds of CPU load
      registers: 
        cpu_load: 
          register: 11
          ro: yes
          label: CPU load
        cpu_load_max: 
          register: 12
          ro: yes
          label: CPU max load
        cpu_load_min: 
          register: 13
          ro: yes
          label: CPU min load
  
Make: 

  include: submod1.makefile
  include: submod2.makefile
  include: submod3.makefile

